{
    "name": "binmgr/toolchain",
    "image": "ghcr.io/binmgr/toolchain:latest",

    "workspaceFolder": "/workspace",
    "workspaceMount": "source=${localWorkspaceFolder},target=/workspace,type=bind,consistency=cached",

    "containerEnv": {
        "TARGET": "",
        "USE_CCACHE": "1",
        "USE_MOLD": "0",
        "PARALLEL_JOBS": ""
    },

    "mounts": [
        "source=${localWorkspaceFolder}/.ccache,target=/workspace/.ccache,type=bind,consistency=cached"
    ],

    "customizations": {
        "vscode": {
            "extensions": [
                "ms-vscode.cpptools",
                "ms-vscode.cmake-tools",
                "rust-lang.rust-analyzer",
                "golang.go",
                "ziglang.vscode-zig",
                "tamasfe.even-better-toml",
                "serayuzgur.crates",
                "vadimcn.vscode-lldb",
                "ms-vscode.makefile-tools",
                "mhutchie.git-graph",
                "eamodio.gitlens",
                "EditorConfig.EditorConfig"
            ],
            "settings": {
                "terminal.integrated.defaultProfile.linux": "bash",
                "terminal.integrated.profiles.linux": {
                    "bash": {
                        "path": "/bin/bash",
                        "icon": "terminal-bash"
                    }
                },
                "C_Cpp.default.compilerPath": "/usr/bin/gcc",
                "C_Cpp.default.cStandard": "c17",
                "C_Cpp.default.cppStandard": "c++20",
                "cmake.configureOnOpen": false,
                "rust-analyzer.checkOnSave.command": "clippy",
                "go.toolsManagement.autoUpdate": false,
                "zig.path": "/opt/zig/zig",
                "files.watcherExclude": {
                    "**/target/**": true,
                    "**/.ccache/**": true,
                    "**/.sccache/**": true,
                    "**/build/**": true
                }
            }
        }
    },

    "postCreateCommand": "echo 'Toolchain ready! Run toolchain-info to see available compilers.'",

    "remoteUser": "root",

    "features": {},

    "hostRequirements": {
        "cpus": 2,
        "memory": "4gb",
        "storage": "32gb"
    }
}
